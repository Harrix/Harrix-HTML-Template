function startPhotoSwipe(){initPhotoSwipeFromDOM(".lightbox")}var initPhotoSwipeFromDOM=function(e){for(var t=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=function e(t,n){return t&&(n(t)?t:e(t.parentNode,n))}(e.target||e.srcElement,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(t){for(var i,r=t.parentNode,o=t.parentNode.childNodes,a=o.length,d=0,l=0;l<a;l++)if(1===o[l].nodeType){if(o[l]===t){i=d;break}d++}return i>=0&&n(i,r),!1}},n=function(e,t,n,i){var r,o,a,d=document.querySelectorAll(".pswp")[0];if(a=function(e){for(var t,n,i,r=e.childNodes,o=r.length,a=[],d=0;d<o;d++)1===(t=r[d]).nodeType&&(i={src:(n=t.children[0]).getAttribute("href"),w:0,h:0},t.children.length>1&&(i.title=t.children[1].innerHTML),n.children.length>0&&(i.msrc=n.children[0].getAttribute("src")),i.el=t,a.push(i));return a}(t),o={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=a[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect();return{x:i.left,y:i.top+n,w:i.width}},shareButtons:[{id:"download",label:"Download",url:"{{raw_image_url}}",download:!0}]},i)if(o.galleryPIDs){for(var l=0;l<a.length;l++)if(a[l].pid==e){o.index=l;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);isNaN(o.index)||(n&&(o.showAnimationDuration=0),(r=new PhotoSwipe(d,PhotoSwipeUI_Default,a,o)).listen("gettingData",function(e,t){if(t.w<1||t.h<1){var n=new Image;n.onload=function(){t.w=this.width,t.h=this.height,r.updateSize(!0)},n.src=t.src}}),r.init())},i=document.querySelectorAll(e),r=0,o=i.length;r<o;r++)i[r].setAttribute("data-pswp-uid",r+1),i[r].onclick=t;var a=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i]){var r=n[i].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t}();a.pid&&a.gid&&n(a.pid,i[a.gid-1],!0,!0)};window.addEventListener?window.addEventListener("load",startPhotoSwipe,!1):window.attachEvent&&window.attachEvent("onload",startPhotoSwipe);